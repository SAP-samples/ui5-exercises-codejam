<mvc:View
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    controllerName="sap.codejam.controller.App">

<App>
    <pages>
        <Page title="{i18n>Bookshop}">
            <content>
            <Panel
                headerText="Hello, Dev! ðŸ‘‹">
                <content>
                    <SearchField liveChange=".onSearch"/>
                    <Table
                        id="booksTable"
                        items="{/Books}">
                        <columns>
                            <Column>
                                <Text text="{i18n>Book}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>Author}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>Genre}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>Price}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>Stock}" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem 
                                vAlign="Middle"
                                press=".onSelect"
                                type="Active">
                                <cells>
                                    <ObjectIdentifier
                                        title="{title}"/>
                                    <Text
                                        text="{author}" />
                                    <Text
                                        text="{genre/name}" />
                                    <ObjectNumber
                                        number="{price}"
                                        unit="{currency_code}" />
                                    <ObjectStatus 
                                        text="{stock}"
                                        state="{=
                                            ${stock} >= 20
                                                ? 'Success'
                                            : ${stock} > 0
                                                ? 'Warning'
                                            : 'Error'}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                    <FlexBox direction="Column" class="sapUiMediumMarginTop" id="bookDetails">
                        <FlexBox alignItems="Center" justifyContent="End" id="orderControls" class="orderControls" binding="{/submitOrder(...)}" >
                            <ObjectStatus id="orderStatus" text="{ path: '$Parameter/orderStatus', targetType: 'any' }" />
                            <Button id="orderBtn" text="Order" press=".onSubmitOrder" enabled="false" />
                            <StepInput  
                                min="1"
                                textAlign="Center"
                                id="stepInput"
                                class="sapUiSmallMarginRight"
                                enabled="false" />                        
                        </FlexBox>
                        <FlexBox direction="Column" >
                            <Title text="{title}" />
                            <Text 
                                text="{descr}"
                                class="sapUiSmallMarginTop" />
                        </FlexBox>
                    </FlexBox>
                </content>
            </Panel>
            </content>
        </Page>
    </pages>
</App>

</mvc:View>