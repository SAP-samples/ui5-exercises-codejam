<mvc:View xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" controllerName="sap.codejam.controller.App">
	<App>
		<pages>
			<Page title="Bookshop">
				<content>
					<Panel headerText="Hello, Dev! ðŸ‘‹">
						<SearchField liveChange=".onSearch"/>
						<Table id="booksTable" items="{ path: &apos;/Books&apos;, parameters: { expand: &apos;genre&apos; } }">
							<columns>
								<Column>
									<Text text="Book"/>
								</Column>
								<Column>
									<Text text="Author"/>
								</Column>
								<Column>
									<Text text="Genre"/>
								</Column>
								<Column>
									<Text text="Price"/>
								</Column>
								<Column>
									<Text text="Stock"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem vAlign="Middle" press=".onSelect" type="Active">
									<cells>
										<ObjectIdentifier title="{title}"/>
										<Text text="{author}"/>
										<Text text="{genre/name}"/>
										<ObjectNumber number="{price}" unit="{currency_code}"/>
<ObjectStatus 
    text="{stock}"
    state="{=
        ${stock} >= 20
            ? 'Success'
        : ${stock} > 0
            ? 'Warning'
        : 'Error'}" />
									</cells>
								</ColumnListItem>
							</items>
						</Table>
						<FlexBox direction="Column" class="sapUiMediumMarginTop" id="bookDetails">
							<FlexBox alignItems="Center" justifyContent="End" class="sapUiMediumMarginBottom">
<Button
    id="orderBtn"
    text="Order"
    press=".onSubmitOrder"
    enabled="{
        path: 'stock',
        formatter: '.formatter.inputLowerThanStock'
	}" 
	class="sapUiTinyMarginEnd" />
<StepInput 
    id="stepInput"
    min="1"
    max="{stock}"
    textAlign="Center"
    validationMode="LiveChange" />
							</FlexBox>
							<FlexBox direction="Column">
								<Title text="{title}"/>
								<Text text="{descr}" class="sapUiSmallMarginTop"/>
							</FlexBox>
						</FlexBox>
					</Panel>
				</content>
			</Page>
		</pages>
	</App>
</mvc:View>
